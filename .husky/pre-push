bash << EOF
set -e

echo "Running build process..."
if ! pnpm build; then
  echo ""
  echo "Build failed. Aborting push."
  exit 1  # Exit with a failure code
fi

# Check for changes in the dist folder
echo ""
if [ -n "$(git status dist --porcelain)" ]; then
  echo "Changes detected in 'dist' folder. Committing..."
  git add dist
  git commit -m "chore: update dist [auto-generated]"
else
  echo "No changes in 'dist'. Skipping commit."
fi
echo ""
echo ""
EOF